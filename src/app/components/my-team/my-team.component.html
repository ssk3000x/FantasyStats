<div class="md:ml-20 lg:ml-56 p-4 md:p-6 lg:p-8">
  <div class="container mx-auto">
    @if (myTeam(); as team) {
    <header class="flex items-center justify-between mb-6">
      <div>
        <div class="flex items-center space-x-3">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"/>
          </svg>
          <h1 class="text-3xl font-bold" [class]="teamColorClass()">{{ team.name }}</h1>
        </div>
        <p class="text-gray-400 mt-1 pl-11">{{ team.wins }}W - {{ team.losses }}L - {{ team.ties }}T</p>
      </div>
       <div class="flex space-x-2">
         @if (isEditing()) {
          <button (click)="saveRoster()" [disabled]="!isRosterValid()" class="px-4 py-2 text-sm font-semibold text-white bg-green-600 rounded-lg hover:bg-green-700 transition disabled:bg-gray-500 disabled:cursor-not-allowed">Save</button>
          <button (click)="toggleEdit()" class="px-4 py-2 text-sm font-semibold text-white bg-gray-600 rounded-lg hover:bg-gray-500 transition">Cancel</button>
         } @else {
          <button (click)="toggleEdit()" class="px-4 py-2 text-sm font-semibold text-white bg-primary rounded-lg hover:bg-primary-hover transition">Edit Lineup</button>
         }
       </div>
    </header>

    <main>
      <!-- TRADE PROPOSALS -->
      @if (pendingTrades().length > 0) {
        <section class="mb-8">
          <h2 class="text-xl font-semibold mb-3 border-b-2 border-yellow-500 pb-2 text-yellow-400">Trade Proposals</h2>
           <div class="space-y-4">
            @for(trade of pendingTrades(); track trade.id) {
              <div class="bg-gray-800 p-4 rounded-lg">
                <p class="text-sm text-gray-400 mb-2">Offer from <span class="font-bold">{{ trade.proposingTeam.name }}</span>:</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div>
                    <p class="font-semibold mb-1 text-red-400">You Give:</p>
                    <ul class="list-disc list-inside text-sm">
                      @for(player of trade.playersRequested; track player.id) {
                        <li>{{ player.name }}</li>
                      }
                    </ul>
                  </div>
                  <div>
                    <p class="font-semibold mb-1 text-green-400">You Get:</p>
                    <ul class="list-disc list-inside text-sm">
                      @for(player of trade.playersOffered; track player.id) {
                        <li>{{ player.name }}</li>
                      }
                    </ul>
                  </div>
                </div>
                <div class="flex justify-end space-x-3 mt-4">
                  <button (click)="rejectTrade(trade.id)" class="px-3 py-1 text-xs font-semibold text-white bg-red-600 rounded-lg hover:bg-red-700 transition">Reject</button>
                  <button (click)="acceptTrade(trade.id)" class="px-3 py-1 text-xs font-semibold text-white bg-green-600 rounded-lg hover:bg-green-700 transition">Accept</button>
                </div>
              </div>
            }
           </div>
        </section>
      }

      <!-- STARTERS -->
      <section class="mb-8">
        <h2 class="text-xl font-semibold mb-3 border-b-2 border-gray-700 pb-2 flex justify-between items-baseline">
          <span>Starters</span>
          <span class="text-sm text-gray-400">
            @if(isEditing()){
              {{ tempStarters().length }} / 3
            } @else {
              {{ starters().length }} / 3
            }
          </span>
        </h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
          @if (isEditing()) {
            @for (player of tempStarters(); track player.id) {
              <div class="bg-gray-800 p-3 rounded-lg flex items-center">
                <div class="flex-grow">
                  <p class="font-semibold">{{ player.name }}</p>
                </div>
                <button (click)="moveToBench(player)" class="px-3 py-1 text-xs font-semibold text-white bg-red-600 rounded-lg hover:bg-red-700 transition">Bench</button>
              </div>
            }
          } @else {
            @for (player of starters(); track player.id) {
            <div (click)="showPlayerDetails(player)" class="bg-gray-800 p-3 rounded-lg flex items-center cursor-pointer hover:bg-gray-700 transition-colors">
              <div class="flex-grow">
                <p class="font-semibold">{{ player.name }}</p>
              </div>
              <div class="ml-auto text-right">
                <p class="font-bold text-lg text-primary">{{ player.projectedPoints.toFixed(1) }}</p>
              </div>
            </div>
            }
          }
        </div>
      </section>

      <!-- BENCH -->
      <section>
         <h2 class="text-xl font-semibold mb-3 border-b-2 border-gray-700 pb-2 flex justify-between items-baseline">
          <span>Bench</span>
           <span class="text-sm text-gray-400">
            @if(isEditing()){
              {{ tempBench().length }}
            } @else {
              {{ bench().length }}
            }
          </span>
        </h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
          @if (isEditing()) {
            @for (player of tempBench(); track player.id) {
              <div class="bg-gray-800 p-3 rounded-lg flex items-center">
                <div class="flex-grow">
                  <p class="font-semibold">{{ player.name }}</p>
                </div>
                <button (click)="moveToStarters(player)" [disabled]="!canMoveToStarters()" class="px-3 py-1 text-xs font-semibold text-white bg-green-600 rounded-lg hover:bg-green-700 transition disabled:bg-gray-500 disabled:cursor-not-allowed">Start</button>
              </div>
            }
          } @else {
            @for (player of bench(); track player.id) {
              <div (click)="showPlayerDetails(player)" class="bg-gray-800 p-3 rounded-lg flex items-center cursor-pointer hover:bg-gray-700 transition-colors">
                <div class="flex-grow">
                  <p class="font-semibold">{{ player.name }}</p>
                </div>
                <div class="ml-auto text-right">
                  <p class="font-bold text-lg text-primary">{{ player.projectedPoints.toFixed(1) }}</p>
                </div>
              </div>
            }
          }
        </div>
      </section>
    </main>

    } @else {
    <p class="text-center text-gray-400">Loading your team...</p>
    }
  </div>
</div>